Run ruby/setup-ruby@v1
Modifying PATH
Downloading Ruby
Extracting  Ruby
Print Ruby version
Installing Bundler
> bundle install
/opt/hostedtoolcache/Ruby/2.7.3/x64/bin/bundle config --local path /home/runner/work/puppet-module-postfix/puppet-module-postfix/vendor/bundle
/opt/hostedtoolcache/Ruby/2.7.3/x64/bin/bundle lock
Fetching gem metadata from https://rubygems.org/.........
Resolving dependencies...
Writing lockfile to /home/runner/work/puppet-module-postfix/puppet-module-postfix/Gemfile.lock
Cache key: setup-ruby-bundler-cache-v6-ubuntu-20.04-x64-ruby-2.7.3-wd-/home/runner/work/puppet-module-postfix/puppet-module-postfix-with--without--only--Gemfile.lock-501d24ff428a07c60e1f99760231552ded570982e934d508787a245436d7ba00
/opt/hostedtoolcache/Ruby/2.7.3/x64/bin/bundle install --jobs 4
Fetching gem metadata from https://rubygems.org/.........
Fetching rake 13.2.1
Installing rake 13.2.1
Fetching nkf 0.2.0
Fetching benchmark 0.4.0
Fetching base64 0.2.0
Fetching rexml 3.4.0
Installing benchmark 0.4.0
Installing base64 0.2.0
Fetching bigdecimal 3.1.9
Fetching concurrent-ruby 1.3.5
Installing rexml 3.4.0
Installing nkf 0.2.0 with native extensions
Installing bigdecimal 3.1.9 with native extensions
Installing concurrent-ruby 1.3.5
Fetching connection_pool 2.5.0
Installing connection_pool 2.5.0
Fetching drb 2.2.1
Installing drb 2.2.1
Fetching logger 1.6.5
Fetching minitest 5.25.4
Installing logger 1.6.5
Fetching mutex_m 0.3.0
Installing minitest 5.25.4
Installing mutex_m 0.3.0
Fetching securerandom 0.3.2
Fetching public_suffix 5.1.1
Installing securerandom 0.3.2
Fetching ansi 1.5.0
Installing public_suffix 5.1.1
Fetching ast 2.4.2
Installing ansi 1.5.0
Installing ast 2.4.2
Fetching fiber-annotation 0.2.0
Fetching fiber-local 1.0.0
Installing fiber-annotation 0.2.0
Fetching nio4r 2.7.4
Installing fiber-local 1.0.0
Fetching timers 4.3.5
Installing timers 4.3.5
Fetching protocol-http 0.24.4
Installing protocol-http 0.24.4
Installing nio4r 2.7.4 with native extensions
Fetching protocol-hpack 1.4.2
Installing protocol-hpack 1.4.2
Fetching traces 0.11.1
Installing traces 0.11.1
Fetching faraday-em_http 1.0.0
Installing faraday-em_http 1.0.0
Fetching faraday-em_synchrony 1.0.0
Installing faraday-em_synchrony 1.0.0
Fetching faraday-excon 1.1.0
Installing faraday-excon 1.1.0
Fetching httpclient 2.8.3
Installing httpclient 2.8.3
Fetching multipart-post 2.4.1
Installing multipart-post 2.4.1
Fetching faraday-net_http 2.1.0
Installing faraday-net_http 2.1.0
Fetching patron 0.13.3
Installing patron 0.13.3 with native extensions
Fetching faraday-rack 1.0.0
Installing faraday-rack 1.0.0
Fetching faraday-retry 1.0.3
Installing faraday-retry 1.0.3
Fetching ruby2_keywords 0.0.5
Installing ruby2_keywords 0.0.5
Fetching awesome_print 1.9.2
Installing awesome_print 1.9.2
Fetching aws-eventstream 1.3.0
Installing aws-eventstream 1.3.0
Fetching aws-partitions 1.1044.0
Installing aws-partitions 1.1044.0
Fetching jmespath 1.6.2
Installing jmespath 1.6.2
Fetching bindata 2.5.0
Installing bindata 2.5.0
Fetching ffi 1.17.1
Installing ffi 1.17.1 with native extensions
Fetching highline 2.1.0
Installing highline 2.1.0
Fetching optimist 3.2.0
Installing optimist 3.2.0
Fetching jwt 2.7.1
Installing jwt 2.7.1
Fetching little-plugger 1.1.4
Installing little-plugger 1.1.4
Fetching multi_json 1.15.0
Installing multi_json 1.15.0
Fetching minitar 0.12.1
Installing minitar 0.12.1
Fetching net-ssh 7.3.0
Installing net-ssh 7.3.0
Fetching deep_merge 1.2.2
Installing deep_merge 1.2.2
Fetching hocon 1.4.0
Installing hocon 1.4.0
Fetching thor 1.2.2
Installing thor 1.2.2
Fetching forwardable 1.3.3
Installing forwardable 1.3.3
Fetching singleton 0.3.0
Installing singleton 0.3.0
Fetching hiera 3.12.0
Installing hiera 3.12.0
Fetching locale 2.1.4
Installing locale 2.1.4
Fetching scanf 1.0.0
Installing scanf 1.0.0
Fetching semantic_puppet 1.1.1
Installing semantic_puppet 1.1.1
Fetching rgen 0.10.2
Installing rgen 0.10.2
Fetching yard 0.9.36
Installing yard 0.9.36
Fetching molinillo 0.8.0
Installing molinillo 0.8.0
Fetching colored2 3.1.2
Installing colored2 3.1.2
Fetching cri 2.15.12
Installing cri 2.15.12
Fetching erubi 1.13.1
Installing erubi 1.13.1
Fetching racc 1.8.1
Installing racc 1.8.1 with native extensions
Fetching text 1.3.1
Installing text 1.3.1
Fetching log4r 1.1.10
Installing log4r 1.1.10
Fetching windows_error 0.1.5
Installing windows_error 0.1.5
Fetching unicode-display_width 1.8.0
Installing unicode-display_width 1.8.0
Fetching builder 3.3.0
Installing builder 3.3.0
Fetching nori 2.6.0
Installing nori 2.6.0
Fetching rubyzip 2.4.1
Installing rubyzip 2.4.1
Fetching docile 1.4.1
Installing docile 1.4.1
Fetching simplecov-html 0.13.1
Installing simplecov-html 0.13.1
Fetching simplecov_json_formatter 0.1.4
Installing simplecov_json_formatter 0.1.4
Fetching coderay 1.1.3
Installing coderay 1.1.3
Fetching parallel 1.26.3
Installing parallel 1.26.3
Fetching diff-lcs 1.5.1
Installing diff-lcs 1.5.1
Fetching excon 1.2.3
Installing excon 1.2.3
Fetching domain_name 0.6.20240107
Installing domain_name 0.6.20240107
Fetching jgrep 1.5.4
Installing jgrep 1.5.4
Fetching rainbow 3.1.1
Installing rainbow 3.1.1
Fetching http-form_data 2.3.0
Installing http-form_data 2.3.0
Fetching spdx-licenses 1.3.0
Installing spdx-licenses 1.3.0
Fetching method_source 1.1.0
Installing method_source 1.1.0
Fetching mocha 1.16.1
Installing mocha 1.16.1
Fetching net-telnet 0.2.0
Installing net-telnet 0.2.0
Fetching pathspec 1.1.3
Installing pathspec 1.1.3
Fetching pluginator 1.5.0
Installing pluginator 1.5.0
Fetching rb-readline 0.5.5
Installing rb-readline 0.5.5
Fetching table_print 1.5.7
Installing table_print 1.5.7
Fetching strings-ansi 0.2.0
Installing strings-ansi 0.2.0
Fetching unicode_utils 1.4.0
Installing unicode_utils 1.4.0
Fetching tty-screen 0.8.2
Installing tty-screen 0.8.2
Fetching puppet-lint 3.4.0
Installing puppet-lint 3.4.0
Fetching retryable 3.0.5
Installing retryable 3.0.5
Fetching rspec-support 3.13.2
Installing rspec-support 3.13.2
Fetching tty-cursor 0.7.1
Installing tty-cursor 0.7.1
Fetching regexp_parser 2.10.0
Installing regexp_parser 2.10.0
Fetching ruby-progressbar 1.13.0
Installing ruby-progressbar 1.13.0
Fetching sfl 2.3
Installing sfl 2.3
Fetching rubyntlm 0.6.5
Installing rubyntlm 0.6.5
Fetching net-http-persistent 4.0.5
Installing net-http-persistent 4.0.5
Fetching i18n 1.14.7
Installing i18n 1.14.7
Fetching tzinfo 2.0.6
Installing tzinfo 2.0.6
Fetching addressable 2.8.7
Installing addressable 2.8.7
Fetching console 1.19.0
Installing console 1.19.0
Fetching protocol-http1 0.15.0
Installing protocol-http1 0.15.0
Fetching protocol-http2 0.15.1
Installing protocol-http2 0.15.1
Fetching faraday-httpclient 2.0.1
Installing faraday-httpclient 2.0.1
Fetching faraday-multipart 1.1.0
Installing faraday-multipart 1.1.0
Fetching aws-sigv4 1.11.0
Installing aws-sigv4 1.11.0
Fetching CFPropertyList 3.0.7
Installing CFPropertyList 3.0.7
Fetching hiera-eyaml 3.4.0
Installing hiera-eyaml 3.4.0
Fetching logging 2.4.0
Installing logging 2.4.0
Fetching net-scp 4.1.0
Installing net-scp 4.1.0
Fetching puppet-resource_api 1.9.0
Installing puppet-resource_api 1.9.0
Fetching facter 4.10.0
Installing facter 4.10.0
Fetching prime 0.1.3
Installing prime 0.1.3
Fetching puppet-strings 4.1.3
Installing puppet-strings 4.1.3
Fetching puppetfile-resolver 0.6.3
Installing puppetfile-resolver 0.6.3
Fetching terminal-table 3.0.2
Installing terminal-table 3.0.2
Fetching gyoku 1.4.0
Installing gyoku 1.4.0
Fetching simplecov 0.21.2
Installing simplecov 0.21.2
Fetching parallel_tests 3.12.1
Installing parallel_tests 3.12.1
Fetching docker-api 2.4.0
Installing docker-api 2.4.0
Fetching http-cookie 1.0.8
Installing http-cookie 1.0.8
Fetching pry 0.15.2
Installing pry 0.15.2
Fetching puppet-modulebuilder 0.3.0
Installing puppet-modulebuilder 0.3.0
Fetching strings 0.2.1
Installing strings 0.2.1
Fetching puppet-lint-absolute_classname-check 3.1.0
Installing puppet-lint-absolute_classname-check 3.1.0
Fetching puppet-lint-anchor-check 1.1.0
Installing puppet-lint-anchor-check 1.1.0
Fetching puppet-lint-file_ensure-check 1.1.0
Installing puppet-lint-file_ensure-check 1.1.0
Fetching puppet-lint-leading_zero-check 1.1.0
Installing puppet-lint-leading_zero-check 1.1.0
Fetching puppet-lint-lookup_in_parameter-check 1.1.0
Installing puppet-lint-lookup_in_parameter-check 1.1.0
Fetching puppet-lint-manifest_whitespace-check 0.2.9
Installing puppet-lint-manifest_whitespace-check 0.2.9
Fetching puppet-lint-optional_default-check 1.1.0
Installing puppet-lint-optional_default-check 1.1.0
Fetching puppet-lint-param-docs 1.7.6
Installing puppet-lint-param-docs 1.7.6
Fetching puppet-lint-param-types 1.0.0
Installing puppet-lint-param-types 1.0.0
Fetching puppet-lint-params_empty_string-check 1.1.0
Installing puppet-lint-params_empty_string-check 1.1.0
Fetching puppet-lint-resource_reference_syntax 1.2.0
Installing puppet-lint-resource_reference_syntax 1.2.0
Fetching puppet-lint-strict_indent-check 2.1.0
Installing puppet-lint-strict_indent-check 2.1.0
Fetching puppet-lint-topscope-variable-check 1.2.0
Installing puppet-lint-topscope-variable-check 1.2.0
Fetching puppet-lint-trailing_comma-check 1.0.0
Installing puppet-lint-trailing_comma-check 1.0.0
Fetching puppet-lint-unquoted_string-check 2.2.0
Installing puppet-lint-unquoted_string-check 2.2.0
Fetching puppet-lint-variable_contains_upcase 1.4.0
Installing puppet-lint-variable_contains_upcase 1.4.0
Fetching puppet-lint-version_comparison-check 1.1.0
Installing puppet-lint-version_comparison-check 1.1.0
Fetching rspec-core 3.13.2
Installing rspec-core 3.13.2
Fetching rspec-expectations 3.13.3
Installing rspec-expectations 3.13.3
Fetching rspec-mocks 3.13.2
Installing rspec-mocks 3.13.2
Fetching tty-spinner 0.9.3
Installing tty-spinner 0.9.3
Fetching ruby_smb 1.1.0
Installing ruby_smb 1.1.0
Fetching faraday-net_http_persistent 2.0.2
Installing faraday-net_http_persistent 2.0.2
Fetching activesupport 7.1.5.1
Installing activesupport 7.1.5.1
Fetching json-schema 4.3.1
Installing json-schema 4.3.1
Fetching async 1.32.1
Installing async 1.32.1
Fetching aws-sdk-core 3.217.1
Installing aws-sdk-core 3.217.1
Fetching specinfra 2.91.0
Installing specinfra 2.91.0
Fetching facterdb 1.27.0
Installing facterdb 1.27.0
Fetching fast_gettext 2.4.0
Installing fast_gettext 2.4.0
Fetching codecov 0.6.0
Installing codecov 0.6.0
Fetching simplecov-console 0.9.2
Installing simplecov-console 0.9.2
Fetching tty-pager 0.14.0
Installing tty-pager 0.14.0
Fetching voxpupuli-puppet-lint-plugins 4.0.0
Fetching rspec-github 2.4.0
Fetching rspec-its 1.3.1
Installing voxpupuli-puppet-lint-plugins 4.0.0
Fetching rspec 3.13.0
Installing rspec-github 2.4.0
Installing rspec-its 1.3.1
Fetching metadata-json-lint 3.0.3
Installing rspec 3.13.0
Fetching async-io 1.43.2
Installing metadata-json-lint 3.0.3
Fetching async-pool 0.4.0
Installing async-io 1.43.2
Installing async-pool 0.4.0
Fetching aws-sdk-ec2 1.503.0
Fetching gssapi 1.3.1
Installing gssapi 1.3.1
Fetching ffi-compiler 1.3.2
Installing ffi-compiler 1.3.2
Fetching puppet 7.34.0
Installing aws-sdk-ec2 1.503.0
Fetching gettext 3.5.1
Installing gettext 3.5.1
Installing puppet 7.34.0
Fetching parser 3.3.7.0
Installing parser 3.3.7.0
Fetching rspec-puppet 2.12.0
Installing rspec-puppet 2.12.0
Fetching serverspec 2.42.3
Installing serverspec 2.42.3
Fetching async-http 0.60.2
Fetching net-ssh-krb 0.5.1
Installing net-ssh-krb 0.5.1
Installing async-http 0.60.2
Fetching winrm 2.3.6
Installing winrm 2.3.6
Fetching puppet_metadata 1.9.0
Installing puppet_metadata 1.9.0
Fetching llhttp-ffi 0.5.0
Fetching rubocop-ast 1.38.0
Installing llhttp-ffi 0.5.0 with native extensions
Installing rubocop-ast 1.38.0
Fetching gettext-setup 1.1.0
Installing gettext-setup 1.1.0
Gem::Ext::BuildError: ERROR: Failed to build gem native extension.

current directory:
/home/runner/work/puppet-module-postfix/puppet-module-postfix/vendor/bundle/ruby/2.7.0/gems/patron-0.13.3/ext/patron
/opt/hostedtoolcache/Ruby/2.7.3/x64/bin/ruby -I
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0 -r
./siteconf20250202-1940-zg7mlo.rb extconf.rb
checking for curl-config... no
checking for -lcurl... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
	--with-opt-dir
	--without-opt-dir
	--with-opt-include
	--without-opt-include=${opt-dir}/include
	--with-opt-lib
	--without-opt-lib=${opt-dir}/lib
	--with-make-prog
	--without-make-prog
	--srcdir=.
	--curdir
	--ruby=/opt/hostedtoolcache/Ruby/2.7.3/x64/bin/$(RUBY_BASE_NAME)
	--with-curl-dir
	--without-curl-dir
	--with-curl-include
	--without-curl-include=${curl-dir}/include
	--with-curl-lib
	--without-curl-lib=${curl-dir}/lib
	--with-curl-config
	--without-curl-config
	--with-curllib
	--without-curllib
extconf.rb:10:in `<main>':   Can't find libcurl or curl/curl.h (RuntimeError)

Try passing --with-curl-config, --with-curl-dir, or --with-curl-lib and
--with-curl-include
  options to extconf.

To see why this extension failed to compile, please check the mkmf.log which can
be found here:

/home/runner/work/puppet-module-postfix/puppet-module-postfix/vendor/bundle/ruby/2.7.0/extensions/x86_64-linux/2.7.0/patron-0.13.3/mkmf.log

extconf failed, exit code 1

Gem files will remain installed in
/home/runner/work/puppet-module-postfix/puppet-module-postfix/vendor/bundle/ruby/2.7.0/gems/patron-0.13.3
for inspection.
Results logged to
/home/runner/work/puppet-module-postfix/puppet-module-postfix/vendor/bundle/ruby/2.7.0/extensions/x86_64-linux/2.7.0/patron-0.13.3/gem_make.out

/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:99:in
`run'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/ext_conf_builder.rb:48:in
`block in build'
  /opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/tempfile.rb:291:in `open'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/ext_conf_builder.rb:30:in
`build'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:169:in
`block in build_extension'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:165:in
`synchronize'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:165:in
`build_extension'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:210:in
`block in build_extensions'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:207:in
`each'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/ext/builder.rb:207:in
`build_extensions'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/2.7.0/rubygems/installer.rb:844:in
`build_extensions'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/rubygems_gem_installer.rb:76:in
`build_extensions'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/rubygems_gem_installer.rb:28:in
`install'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/source/rubygems.rb:203:in
`install'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/installer/gem_installer.rb:54:in
`install'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/installer/gem_installer.rb:16:in
`install_from_spec'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/installer/parallel_installer.rb:130:in
`do_install'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/installer/parallel_installer.rb:121:in
`block in worker_pool'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/worker.rb:62:in
`apply_func'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/worker.rb:57:in
`block in process_queue'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/worker.rb:54:in
`loop'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/worker.rb:54:in
`process_queue'
/opt/hostedtoolcache/Ruby/2.7.3/x64/lib/ruby/gems/2.7.0/gems/bundler-2.4.22/lib/bundler/worker.rb:90:in
`block (2 levels) in create_threads'

An error occurred while installing patron (0.13.3), and Bundler cannot continue.

In Gemfile:
  github_changelog_generator was resolved to 1.16.4, which depends on
    async-http-faraday was resolved to 0.12.0, which depends on
      faraday was resolved to 1.9.0, which depends on
        faraday-patron was resolved to 2.0.1, which depends on
          patron
Error: The process '/opt/hostedtoolcache/Ruby/2.7.3/x64/bin/bundle' failed with exit code 5
0s
